import java.io.Serializable;
import java.io.*;
import java.util.*;
 abstract class BankAccount implements Serializable{
	 protected int accountNumber;
	 protected String name;
	 protected double balance;
	 public BankAccount(int accNo, String name, double balance) {
		 this.accountNumber = accNo;
		 this.name = name;
		 this.balance = balance;
	 }
	 public int getAccountNumber() {
		 return accountNumber;
	 }
	 public double getBalance() {
		 return balance;
	 }
	 public String name() {
		 return name;
	 }
	 abstract void deposit(double amount);
	 abstract void withdraw(double amount);
	 public void display() {
		System.out.println("account no" + accountNumber) ;
		System.out.println("name" + name);
		System.out.println("balance " + balance);
	 }
	 
 }
 
 class SavingsAccount extends BankAccount{
	 public SavingsAccount(int accountNumber, String name, double balance) {
		 super(accountNumber, name, balance);
	 }
	  void deposit(double amount) {
		  balance += amount;
		System.out.println("amount deposited :" + amount)  ;
	  }
	  
	  void withdraw(double amount) {
		if(balance - amount >= 1000)  {
			balance -= amount;
		System.out.println("amount withdraw :" + amount);
		}
		else {
		System.out.println("minimum balance of 1000 required")	;
		}
	  }
 }
 class CurrentAccount extends BankAccount{
	public CurrentAccount(int accNo, String name, double balance) {
	super(accNo, name, balance)	;
	}
	
	void deposit(double amount) {
		balance += amount;
		System.out.println("amount deposited: " + amount);
	}
	 void withdraw(double amount) {
		 if(amount <= balance) {
			 balance -= amount;
		System.out.println("amount withdraw: " + amount);	 
		 }
		 else {
		System.out.println("insufficient balance!")	; 
		 }
	 }
	
 }
 
 class FileHandler{
	 public static void saveAccount(BankAccount acc) {
		 try {
			 ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("bank.dat"));
			 out.writeObject(acc);
			 out.close();
		 } catch(Exception e) {
		System.out.println("error saving file")	; 
		 }
	 }
	 
	 public static BankAccount loadAccount() {
		 try {
		ObjectInputStream in = new ObjectInputStream(new FileInputStream("bank.dat"))	;
		BankAccount acc = (BankAccount) in.readObject();
		in.close();
		return acc;
		 } catch (Exception e) {
			 return null;
		 }
	 }
 }
 
public class BankManagementSystem {
public static void main(String args[]) {
	Scanner sc = new Scanner(System.in);
	 BankAccount account = null;
	 while(true) {
		System.out.println("\n1.create Account");
		System.out.println("2.Deposit");
		System.out.println("3.withdraw");
		System.out.println("4. Balance Enquiry");
		System.out.println("5. Display Account");
		System.out.println("6. Exit");
		
		System.out.print("enter choice :");
		int choice = sc.nextInt();
		
		switch(choice) {
		case 1: 
			System.out.print("1. savings 2. current:");
			int type = sc.nextInt();
			System.out.println("account number:");
			int accNo = sc.nextInt();
			sc.nextLine();
			System.out.print("name:");
			String name = sc.nextLine();
			System.out.print("initial balance");
			double bal = sc.nextDouble();
			if(type == 1)
				account = new SavingsAccount(accNo, name, bal);
			else
				account = new CurrentAccount(accNo, name, bal);
			FileHandler.saveAccount(account);
			System.out.println("account created successfully!");
			break;
			
		case 2: 
			account = FileHandler.loadAccount();
			System.out.print("enter amount:");
			account.deposit(sc.nextDouble());
			FileHandler.saveAccount(account);
			break;
		case 3:
			account = FileHandler.loadAccount();
			System.out.print("enter amount");
			
			account.withdraw(sc.nextDouble());
			FileHandler.saveAccount(account);
			break;
			
		case 4:
			account = FileHandler.loadAccount();
			System.out.println("balance :" + account.getBalance());
			break;
		case 5 :
		account = FileHandler.loadAccount()	;
		account.display();
		break;
		
		case 6:
			System.out.println("Thank You!");
			System.exit(0);
			
		}
		
		
	 }
}
}
